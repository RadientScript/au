getgenv().Level=0;repeat task.wait()until game:IsLoaded()local a="https://discord.com/api/webhooks/1230899982165479455/Zx3pyf5_DuGB-FvftwuyTs1f4F16G9mby0hHEKbkUPFBwMIxV14mQp4Nwhvtzuj2LCQK"local function b()local c=DateTime.now():ToLocalTime()local d=string.format("%02d:%02d:%02d",c.Hour,c.Minute,c.Second)return d end;local e=game.PlaceId==12886143095 or game.PlaceId==18583778121;local f=game:GetService("Players").LocalPlayer;local g=game:GetService("ReplicatedStorage")local h=f.PlayerGui;local i={}local j=tick()task.spawn(function()while task.wait(1)do local k=tick()-j;if k>=120 and e then game:Shutdown()break end end end)local function l(m)local n,o=m:match("([%d%.]+)([kKmMbB]?)")n=tonumber(n)if o:lower()=="k"then return n*1000 elseif o:lower()=="m"then return n*1000000 elseif o:lower()=="b"then return n*1000000000 end;return n end;local function p(m)local q=tostring(m):reverse():gsub("(%d%d%d)","%1,"):reverse()if q:sub(1,1)==","then q=q:sub(2)end;return q end;local function r(a,s)local t=game:GetService("HttpService")request({Url=a,Method="POST",Headers={["Content-Type"]="application/json"},Body=t:JSONEncode({embeds={s}})})end;task.spawn(function()while task.wait()do local u,v=pcall(function()local w=game:GetService("HttpService")local x=b()if e then repeat for y=1,2 do g.Remotes.InfiniteCastleManager:FireServer("GetData")task.wait(.5)g.Remotes.InfiniteCastleManager:FireServer("GetGlobalData")end;g.Remotes.InfiniteCastleManager:FireServer("Play",Level,true)task.wait(.5)until not e else local z=h:WaitForChild("MainUI")local A=g.Gamemode.Value;local B=workspace:WaitForChild("Map").MapName.Value;local C=workspace:WaitForChild("Map").MapDifficulty.Value;local D=g.Wave.Value;repeat task.wait()until z.Enabled;if not workspace.Towers:FindFirstChild(f.Slots.Slot1.Value)and game:GetService("Players").LocalPlayer.Cash.Value>=l(game:GetService("Players").LocalPlayer.PlayerGui.MainUI.SlotsBG.Slots.Slot1.Cost.Text)then g.Remotes.PlaceTower:FireServer(tostring(f.Slots.Slot1.Value),CFrame.new(-168.2913818359375,197.93942260742188,16.62772560119629))task.wait(1)end;local E=h:FindFirstChild("EndGameUI")if E or g.GameEnded.Value then local F=game:GetService("ReplicatedStorage").Remotes.GetTeleportData:InvokeServer()local G=""local H=game:GetService("ReplicatedStorage").Remotes.GetPlayerData:InvokeServer()local I=H.ItemData;local J,K=nil;local L=p(tonumber(w:JSONEncode(H.Level)))local M=p(tonumber(w:JSONEncode(H.EXP)))local N=p(tonumber(w:JSONEncode(H.MaxEXP)))local O=tonumber(w:JSONEncode(H.Rerolls))local P=""for y,Q in ipairs(E.BG.Container.Rewards.Holder:GetChildren())do if Q:IsA("TextButton")then local R=tonumber(Q.Amount.Text:match("%d+"))for S,T in pairs(I)do if T.ItemName or T.Amount then local J,K=T.ItemName,tonumber(T.Amount)end end;if Q.ItemName.Text=="Technique Shard"then K=O elseif Q.ItemName.Text==J then K=K end;P="+ "..P..Q.ItemName.Text:gsub("Technique Shard","Rerolls").." "..R.." (Total: "..K..")\n"end end;local U=""for S,V in pairs(game:GetService("Players").LocalPlayer.Slots:GetChildren())do if string.match(V.Name,"^Slot%d+$")then if V.Value~=""then U=U.."["..V.Level.Value.."] "..V.Value.."\n"end end end;if w:JSONEncode(F.Type)=='"InfiniteCastle"'then G=" Room "..w:JSONEncode(F.Room)else G=" Act "..w:JSONEncode(F.MapNum)end;if game:GetService("Players").LocalPlayer.PlayerGui.EndGameUI.BG.Container.Stats.Result.TextColor3==Color3.new(153/255,255/255,75/255)then ColorWL=65280 else ColorWL=16711680 end;if P~=""then local s={title="Reroll Farm",color=tonumber(ColorWL),fields={{name="",value="User : ".."||"..f.Name.."||".."\n".."Level: "..L.." ["..M.."/"..N.."]"},{name="Units",value=U,inline=true},{name="Reward",value=P,inline=true}},thumbnail={url="https://cdn.discordapp.com/attachments/1287980533162315808/1321789124470116383/latest.png?ex=676e838c&is=676d320c&hm=be9b5f0f61f2165f1e9fe8d656d445afe0892c430666d2555fb3bd43e73b7692&"},footer={text=E.BG.Container.Stats.ElapsedTime.Text.." -  Wave "..tostring(D).." \n"..w:JSONEncode(F.Type):gsub('"',"").." "..w:JSONEncode(F.MapName):gsub('"',"")..G.." ["..w:JSONEncode(F.Difficulty):gsub('"',"").."] ".."("..x..")"}}r(a,s)task.wait(.5)game:GetService("TeleportService"):Teleport(12886143095,f)task.wait(3)return end end end end)if not u then warn("Error occurred: "..tostring(v))end end end)repeat task.wait()until game.CoreGui:FindFirstChild("RobloxPromptGui")local W=""game.CoreGui.RobloxPromptGui.promptOverlay.ChildAdded:Connect(function(X)if X.Name=="ErrorPrompt"then task.wait(.5)local Y=game.CoreGui.RobloxPromptGui.promptOverlay:WaitForChild("ErrorPrompt").MessageArea.ErrorFrame;for y,V in ipairs(Y:GetChildren())do if V.ClassName=="TextLabel"then W=V.Text end end;if Y then local s={title="Disconnect From Server",color=00000,fields={{name="||"..f.Name.."||",value=W}},footer={text="Rejoining"}}r(a,s)else print("ErrorPrompt not found.")end;repeat game:GetService("TeleportService"):Teleport(12886143095,f)task.wait(2)until false end end)
