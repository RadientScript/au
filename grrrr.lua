getgenv().Level=0;repeat task.wait()until game:IsLoaded()local a="https://discord.com/api/webhooks/1230899982165479455/Zx3pyf5_DuGB-FvftwuyTs1f4F16G9mby0hHEKbkUPFBwMIxV14mQp4Nwhvtzuj2LCQK"local function b()local c=DateTime.now():ToLocalTime()local d=string.format("%02d:%02d:%02d",c.Hour,c.Minute,c.Second)return d end;local e=game.PlaceId==12886143095 or game.PlaceId==18583778121;local f=game:GetService("Players").LocalPlayer;local g=game:GetService("ReplicatedStorage")local h=f.PlayerGui;local i={}local j=tick()local function k()local l=tick()-j;local m=math.floor(l/3600)local n=math.floor(l%3600/60)local o=math.floor(l%60)return string.format("%02d:%02d:%02d",m,n,o)end;task.spawn(function()while task.wait(1)do local l=tick()-j;if l>=120 and e then game:Shutdown()break end end end)local function p(q)local r,s=q:match("([%d%.]+)([kKmMbB]?)")r=tonumber(r)if s:lower()=="k"then return r*1000 elseif s:lower()=="m"then return r*1000000 elseif s:lower()=="b"then return r*1000000000 end;return r end;local function t(q)local u=tostring(q):reverse():gsub("(%d%d%d)","%1,"):reverse()if u:sub(1,1)==","then u=u:sub(2)end;return u end;local function v(a,w)local x=game:GetService("HttpService")request({Url=a,Method="POST",Headers={["Content-Type"]="application/json"},Body=x:JSONEncode({embeds={w}})})end;task.spawn(function()while task.wait()do local y,z=pcall(function()local A=game:GetService("HttpService")local B=b()if e then repeat for C=1,2 do g.Remotes.InfiniteCastleManager:FireServer("GetData")task.wait(.5)g.Remotes.InfiniteCastleManager:FireServer("GetGlobalData")end;g.Remotes.InfiniteCastleManager:FireServer("Play",Level,true)task.wait(.5)until not e else local D=h:WaitForChild("MainUI")local E=g.Wave.Value;repeat task.wait()until D.Enabled;if not workspace.Towers:FindFirstChild(f.Slots.Slot1.Value)and game:GetService("Players").LocalPlayer.Cash.Value>=p(game:GetService("Players").LocalPlayer.PlayerGui.MainUI.SlotsBG.Slots.Slot1.Cost.Text)then g.Remotes.PlaceTower:FireServer(tostring(f.Slots.Slot1.Value),CFrame.new(-168.2913818359375,197.93942260742188,16.62772560119629))task.wait(1)end;local F=h:FindFirstChild("EndGameUI")if F or g.GameEnded.Value then local G=game:GetService("ReplicatedStorage").Remotes.GetTeleportData:InvokeServer()local H=""local I=game:GetService("ReplicatedStorage").Remotes.GetPlayerData:InvokeServer()local J=I.ItemData;local K,L=nil;local M=t(tonumber(A:JSONEncode(I.Level)))local N=t(tonumber(A:JSONEncode(I.EXP)))local O=t(tonumber(A:JSONEncode(I.MaxEXP)))local P=tonumber(A:JSONEncode(I.Rerolls))local Q=t(tonumber(A:JSONEncode(I.Jewels)))local R=t(tonumber(A:JSONEncode(I.Emeralds)))local S=t(tonumber(A:JSONEncode(I.Gold)))local T=t(tonumber(A:JSONEncode(I.Rerolls)))local U=""for C,V in ipairs(F.BG.Container.Rewards.Holder:GetChildren())do if V:IsA("TextButton")then local W=tonumber(V.Amount.Text:match("%d+"))or 0;local L=0;local X=false;local Y=""for C,Z in pairs(J)do if Z.ItemName==V.ItemName.Text then L=tonumber(Z.Amount)or 0;X=true;break end end;if X then Y=" (Total: "..L..")"end;U=U.."+ "..V.ItemName.Text:gsub("Technique Shard","Rerolls").." "..W..Y.."\n"end end;local _=""for a0,a1 in pairs(I.Slots)do local a2=a1.Kills or 0;local M=a1.Level or 1;local q=a1.Value or""local a3=a1.Cash or 0;if q~=""then _=_..string.format("[ %d ] %s = %s :crossed_swords:\n",M,q,t(tonumber(a2)))end end;if A:JSONEncode(G.Type)=='"InfiniteCastle"'then H=" Room "..A:JSONEncode(G.Room)else H=" Act "..A:JSONEncode(G.MapNum)end;ColorWL=00000;WinLoss=""if game:GetService("Players").LocalPlayer.PlayerGui.EndGameUI.BG.Container.Stats.Result.TextColor3==Color3.new(153/255,255/255,75/255)then ColorWL=65280;WinLoss="VICTORY"else ColorWL=16711680;WinLoss="DEFEAT"end;if U~=""then local w={title="Reroll Farm",color=tonumber(ColorWL),fields={{name="",value="User : ".."||"..f.Name.."||".."\n".."Level: "..M.." ["..N.."/"..O.."]"},{name="Player Stats",value="<:emerald:1204766658397343805> "..R.."\n<:als_jewels:1265957290251522089> "..Q.."\n<:coinals:1322519939525120072> "..S.."\n<:rerolls:1216376860804382860> "..T,inline=true},{name="",value="",inline=true},{name="Reward",value=U,inline=true},{name="Units",value=_},{name="Match Result",value=k().." -  Wave "..tostring(E).." \n"..A:JSONEncode(G.Type):gsub('"',"").." "..A:JSONEncode(G.MapName):gsub('"',"")..H.." ["..A:JSONEncode(G.Difficulty):gsub('"',"").."] ".." - "..WinLoss}},thumbnail={url="https://cdn.discordapp.com/attachments/1287980533162315808/1321789124470116383/latest.png?ex=676e838c&is=676d320c&hm=be9b5f0f61f2165f1e9fe8d656d445afe0892c430666d2555fb3bd43e73b7692&"},footer={text="Local Time".." : "..B}}v(a,w)task.wait(.5)game:GetService("TeleportService"):Teleport(12886143095,f)task.wait(3)return end end end end)if not y then warn("Error occurred: "..tostring(z))end end end)repeat task.wait()until game.CoreGui:FindFirstChild("RobloxPromptGui")local a4=""game.CoreGui.RobloxPromptGui.promptOverlay.ChildAdded:Connect(function(a5)if a5.Name=="ErrorPrompt"then task.wait(.5)local a6=game.CoreGui.RobloxPromptGui.promptOverlay:WaitForChild("ErrorPrompt").MessageArea.ErrorFrame;for C,a7 in ipairs(a6:GetChildren())do if a7.ClassName=="TextLabel"then a4=a7.Text end end;if a6 then local w={title="Disconnect From Server",color=00000,fields={{name="||"..f.Name.."||",value=a4}},footer={text="Rejoining"}}v(a,w)else print("ErrorPrompt not found.")end;repeat game:GetService("TeleportService"):Teleport(12886143095,f)task.wait(2)until false end end)
