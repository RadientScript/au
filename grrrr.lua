getgenv().Level=0;repeat task.wait()until game:IsLoaded()local a="https://discord.com/api/webhooks/1230899982165479455/Zx3pyf5_DuGB-FvftwuyTs1f4F16G9mby0hHEKbkUPFBwMIxV14mQp4Nwhvtzuj2LCQK"local function b()local c=DateTime.now():ToLocalTime()local d=string.format("%02d:%02d:%02d",c.Hour,c.Minute,c.Second)return d end;local e=game.PlaceId==12886143095 or game.PlaceId==18583778121;local f=game:GetService("Players").LocalPlayer;local g=game:GetService("ReplicatedStorage")local h=f.PlayerGui;local i={}local j=tick()task.spawn(function()while task.wait(1)do local k=tick()-j;if k>=120 and e then game:Shutdown()break end end end)local function l(m)local n,o=m:match("([%d%.]+)([kKmMbB]?)")n=tonumber(n)if o:lower()=="k"then return n*1000 elseif o:lower()=="m"then return n*1000000 elseif o:lower()=="b"then return n*1000000000 end;return n end;local function p(m)local q=tostring(m):reverse():gsub("(%d%d%d)","%1,"):reverse()if q:sub(1,1)==","then q=q:sub(2)end;return q end;local function r(a,s)local t=game:GetService("HttpService")request({Url=a,Method="POST",Headers={["Content-Type"]="application/json"},Body=t:JSONEncode({embeds={s}})})end;task.spawn(function()while task.wait()do local u,v=pcall(function()local w=game:GetService("HttpService")local x=b()if e then repeat for y=1,2 do g.Remotes.InfiniteCastleManager:FireServer("GetData")task.wait(.5)g.Remotes.InfiniteCastleManager:FireServer("GetGlobalData")end;g.Remotes.InfiniteCastleManager:FireServer("Play",Level,true)task.wait(.5)until not e else local z=h:WaitForChild("MainUI")local A=g.Wave.Value;repeat task.wait()until z.Enabled;if not workspace.Towers:FindFirstChild(f.Slots.Slot1.Value)and game:GetService("Players").LocalPlayer.Cash.Value>=l(game:GetService("Players").LocalPlayer.PlayerGui.MainUI.SlotsBG.Slots.Slot1.Cost.Text)then g.Remotes.PlaceTower:FireServer(tostring(f.Slots.Slot1.Value),CFrame.new(-168.2913818359375,197.93942260742188,16.62772560119629))task.wait(1)end;local B=h:FindFirstChild("EndGameUI")if B or g.GameEnded.Value then local C=game:GetService("ReplicatedStorage").Remotes.GetTeleportData:InvokeServer()local D=""local E=game:GetService("ReplicatedStorage").Remotes.GetPlayerData:InvokeServer()local F=E.ItemData;local G,H=nil;local I=p(tonumber(w:JSONEncode(E.Level)))local J=p(tonumber(w:JSONEncode(E.EXP)))local K=p(tonumber(w:JSONEncode(E.MaxEXP)))local L=tonumber(w:JSONEncode(E.Rerolls))local M=p(tonumber(w:JSONEncode(E.Jewels)))local N=p(tonumber(w:JSONEncode(E.Emeralds)))local O=p(tonumber(w:JSONEncode(E.Gold)))local P=p(tonumber(w:JSONEncode(E.Rerolls)))local Q=""for y,R in ipairs(B.BG.Container.Rewards.Holder:GetChildren())do if R:IsA("TextButton")then local S=tonumber(R.Amount.Text:match("%d+"))for T,U in pairs(F)do if U.ItemName or U.Amount then local G,H=U.ItemName,tonumber(U.Amount)end end;if R.ItemName.Text=="Technique Shard"then H=L elseif R.ItemName.Text==G then H=H end;Q="+ "..Q..R.ItemName.Text:gsub("Technique Shard","Rerolls").." "..S.." (Total: "..H..")\n"end end;local V=""for W,X in pairs(E.Slots)do local Y=X.Kills or 0;local I=X.Level or 1;local m=X.Value or""local Z=X.Cash or 0;if m~=""then V=V..string.format("[ %d ] %s = %s :crossed_swords:\n",I,m,p(tonumber(Y)))end end;if w:JSONEncode(C.Type)=='"InfiniteCastle"'then D=" Room "..w:JSONEncode(C.Room)else D=" Act "..w:JSONEncode(C.MapNum)end;ColorWL=00000;WinLoss=""if game:GetService("Players").LocalPlayer.PlayerGui.EndGameUI.BG.Container.Stats.Result.TextColor3==Color3.new(153/255,255/255,75/255)then ColorWL=65280;WinLoss="VICTORY"else ColorWL=16711680;WinLoss="DEFEAT"end;if Q~=""then local s={title="Reroll Farm",color=tonumber(ColorWL),fields={{name="",value="User : ".."||"..f.Name.."||".."\n".."Level: "..I.." ["..J.."/"..K.."]"},{name="Player Stats",value="<:emerald:1204766658397343805> "..N.."\n<:als_jewels:1265957290251522089> "..M.."\n<:coinals:1322519939525120072> "..O.."\n<:rerolls:1216376860804382860> "..P,inline=true},{name="",value="",inline=true},{name="Reward",value=Q,inline=true},{name="Units",value=V},{name="Match Result",value=B.BG.Container.Stats.ElapsedTime.Text.." -  Wave "..tostring(A).." \n"..w:JSONEncode(C.Type):gsub('"',"").." "..w:JSONEncode(C.MapName):gsub('"',"")..D.." ["..w:JSONEncode(C.Difficulty):gsub('"',"").."] ".." - "..WinLoss}},thumbnail={url="https://cdn.discordapp.com/attachments/1287980533162315808/1321789124470116383/latest.png?ex=676e838c&is=676d320c&hm=be9b5f0f61f2165f1e9fe8d656d445afe0892c430666d2555fb3bd43e73b7692&"},footer={text="Local Time".." : "..x}}r(a,s)task.wait(.5)game:GetService("TeleportService"):Teleport(12886143095,f)task.wait(3)return end end end end)if not u then warn("Error occurred: "..tostring(v))end end end)repeat task.wait()until game.CoreGui:FindFirstChild("RobloxPromptGui")local _=""game.CoreGui.RobloxPromptGui.promptOverlay.ChildAdded:Connect(function(a0)if a0.Name=="ErrorPrompt"then task.wait(.5)local a1=game.CoreGui.RobloxPromptGui.promptOverlay:WaitForChild("ErrorPrompt").MessageArea.ErrorFrame;for y,a2 in ipairs(a1:GetChildren())do if a2.ClassName=="TextLabel"then _=a2.Text end end;if a1 then local s={title="Disconnect From Server",color=00000,fields={{name="||"..f.Name.."||",value=_}},footer={text="Rejoining"}}r(a,s)else print("ErrorPrompt not found.")end;repeat game:GetService("TeleportService"):Teleport(12886143095,f)task.wait(2)until false end end)
